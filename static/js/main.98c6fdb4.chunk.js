(this["webpackJsonpmultiplayer-super-tic-tac-toe"]=this["webpackJsonpmultiplayer-super-tic-tac-toe"]||[]).push([[0],{117:function(e,t){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(60),s=a.n(o),i=(a(72),a(19)),c=a(2),l=a(61),u=a(20),m=a(21),d=a(30),h=a(27),p=function(e){var t=e.type,a=e.choice,n=e.label,o=e.onChoice;return r.a.createElement("div",{className:"btn btn-".concat(t),onClick:o.bind(void 0,a)},n)},g=function(e){var t=e.logo,a=e.onChoice;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"choice-container"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:t,alt:"React TicTacToe"})),r.a.createElement(p,{onChoice:a,type:"primary",choice:"new",label:"Start New"}),r.a.createElement(p,{onChoice:a,type:"secondary",choice:"join",label:"Join Game"})))},v=function(e){var t=e.name,a=e.placeholder,n=e.value,o=e.onChange;return r.a.createElement("input",{autoComplete:"off",type:"text",name:t,id:t,placeholder:a,value:n,onChange:o})},f=function(e){var t=e.stepBack,a=e.onSubmit,n=e.onTyping,o=e.newGame,s=e.name,i=e.room;return o?r.a.createElement("div",{className:"input-container"},r.a.createElement(v,{name:"name",placeholder:"Your Name...",onChange:n,value:s}),r.a.createElement("div",{className:"nav-container"},r.a.createElement(p,{type:"nav-back",choice:"back",onChoice:t,label:"Back"}),r.a.createElement(p,{type:"nav-forward",choice:"submit",onChoice:a,label:"Let's Go"}))):r.a.createElement("div",{className:"input-container"},r.a.createElement(v,{name:"name",placeholder:"Your Name...",onChange:n,value:s}),r.a.createElement(v,{name:"room",placeholder:"Room ID...",onChange:n,value:i}),r.a.createElement("div",{className:"nav-container"},r.a.createElement(p,{type:"nav-back",choice:"back",onChoice:t,label:"Back"}),r.a.createElement(p,{type:"nav-forward",choice:"submit",onChoice:a,label:"Let's Go"})))},y=function(e){var t=e.loading;return r.a.createElement("div",{className:"loader",style:{display:t?"flex":"none"}},r.a.createElement("i",{className:"fa fa-spinner fa-pulse fa-4x fa-fw"}),r.a.createElement("span",{style:{userSelect:"none"}},"Loading..."))},k=function(e){var t=e.display,a=e.message;return r.a.createElement("div",{className:"error",style:{opacity:t?"100%":"0"}},r.a.createElement("h1",{className:"error-message"},a))},b=a(62),E=a.n(b),C=a(22),S=a.n(C),w=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChoice=function(e){var t={newGame:"new"===e};n.setState(t,(function(){n.stepForward()}))},n.validate=function(){return n.state.newGame?!(""===n.state.name):!(""===n.state.name)&&!(""===n.state.room)},n.onSubmit=function(){console.log("Inside OnSubmit..."),n.setState({loading:!0}),n.validate()?(console.log("Validated...."),n.state.newGame?(console.log("emitting newGame....",n.socket),n.socket.emit("newGame")):n.socket.emit("joining",{room:n.state.room})):(setTimeout((function(){return n.setState({loading:!1})}),500),n.displayError(n.state.newGame?"Please fill out your name":"Please fill out your name and room id"))},n.stepBack=function(){n.setState({step:n.state.step-1})},n.stepForward=function(){n.setState({step:n.state.step+1})},n.onTyping=function(e){var t=e.target.name,a=Object(l.a)({},t,e.target.value);n.setState(a)},n.displayError=function(e){n.setState({error:!0,errorMessage:e,loading:!1}),setTimeout((function(){n.setState({error:!1,errorMessage:""})}),3e3)},n.state={step:1,name:"",newGame:null,room:"",loading:!1,serverConfirmed:!1,error:!1,errorMessage:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket=S()("https://sleepy-taiga-16574.herokuapp.com/"),this.socket.on("newGameCreated",(function(t){e.setState({serverConfirmed:!0,room:t})})),this.socket.on("joinConfirmed",(function(){e.setState({serverConfirmed:!0})})),this.socket.on("errorMessage",(function(t){return e.displayError(t)}))}},{key:"componentWillUnmount",value:function(){this.socket.disconnect()}},{key:"render",value:function(){if(this.state.serverConfirmed)return r.a.createElement(c.a,{to:"/game?room=".concat(this.state.room,"&name=").concat(this.state.name)});switch(this.state.step){case 1:return r.a.createElement(g,{logo:E.a,onChoice:this.onChoice});case 2:return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{loading:this.state.loading}),r.a.createElement(k,{display:this.state.error,message:this.state.errorMessage}),r.a.createElement(f,{stepBack:this.stepBack,onSubmit:this.onSubmit,onTyping:this.onTyping.bind(this),newGame:this.state.newGame,name:this.state.name,room:this.state.room}));default:return null}}}]),a}(r.a.Component),x=a(64),N=a(135),j=a(136),O=function(e){var t=e.room,a=e.display,o=Object(n.useRef)(null);return r.a.createElement("div",{className:"wait",style:{display:a?"flex":"none"}},r.a.createElement("h1",{className:"wait-message"},"Waiting for player to connect..."),r.a.createElement("div",{className:"copy"},r.a.createElement("h1",{className:"copy-message"},"Give your friend the following room id to connect"),r.a.createElement("div",{className:"copy-container"},r.a.createElement("input",{ref:o,readOnly:!0,value:t,className:"copy-area"}),r.a.createElement("button",{className:"copy-button",onClick:function(){o.current.select(),document.execCommand("copy")}},"Copy"))))};function M(e){var t=e.end,a=e.onClick;return r.a.createElement("div",{className:"again-container"},r.a.createElement("button",{className:"again-button",onClick:a,style:{visibility:t?"visible":"hidden",opacity:t?"1":"0"}},"Play Again"))}var B=a(133);var R=function(e){var t=e.prevCoordinate,a=e.gameResult,n=e.boardResult,o=e.value,s=e.isEnabled,i=e.index,c=e.boardIndex,l=e.handleOnClick,u=function(e,t,a){var n="white";"X"==t?n="lightblue":"O"==t?n="darkseagreen":"D"==t?n="sandybrown":e&&(n="gray");var r="1px solid black";return a&&(r="1.5px solid red"),Object(B.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(3),textAlign:"center",color:"black",backgroundColor:n,border:r,fontSize:"1rem",height:"1rem"}}}))()}(s,n,function(e,t,a){return!!e&&(e.prevBoard==t&&e.prevIndex==a)}(t,c,i));return r.a.createElement(N.a,{item:!0,xs:4},r.a.createElement(j.a,{className:u.paper,onClick:function(e){console.log("here!"),s&&"U"==n&&null==o&&"U"==a&&l(c,i)}},o))},G=Object(B.a)((function(e){return{root:{},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),P=function(e){G();for(var t=e.prevCoordinate,a=e.gameResult,n=e.isEnabled,o=e.boardIndex,s=e.board,i=e.handleOnClick,c=[],l=0,u=s.boardResult,m=0;m<9;m++){var d=s.board[m];c.push(r.a.createElement(R,{prevCoordinate:t,gameResult:a,boardResult:u,value:d,isEnabled:n,index:m,boardIndex:o,key:l,handleOnClick:i})),l+=1}return r.a.createElement(N.a,{item:!0,xs:4,container:!0},c)},T=a(63),I=a.n(T),D=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(e,t){var a=n.state,r=a.game,o=a.piece,s=a.end,i=a.turn,c=a.room;r[t]||s||!i||n.socket.emit("move",{room:c,piece:o,boardIndex:e,index:t})},n.playAgainRequest=function(){n.socket.emit("playAgainRequest",n.state.room)},n.state={game:null,piece:"X",turn:!0,end:!1,room:"",statusMessage:"",currentPlayerScore:0,opponentPlayer:[],waiting:!1,joinError:!1},n.socketID=null,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket=S()("https://sleepy-taiga-16574.herokuapp.com/");var t=I.a.parse(window.location.search,{ignoreQueryPrefix:!0}),a=t.room,n=t.name;this.setState({room:a}),this.socket.emit("newRoomJoin",{room:a,name:n}),this.socket.on("waiting",(function(){return e.setState({waiting:!0,currentPlayerScore:0,opponentPlayer:[]})})),this.socket.on("starting",(function(t){var a=t.gameState,n=t.players,r=t.turn;e.setState({waiting:!1}),e.gameStart(a,n,r)})),this.socket.on("joinError",(function(){return e.setState({joinError:!0})})),this.socket.on("pieceAssignment",(function(t){var a=t.piece,n=t.id;e.setState({piece:a}),e.socketID=n})),this.socket.on("update",(function(t){var a=t.gameState;return e.handleUpdate(a)})),this.socket.on("winner",(function(t){var a=t.gameState,n=t.id;return e.handleWin(n,a)})),this.socket.on("draw",(function(t){var a=t.gameState;return e.handleDraw(a)})),this.socket.on("restart",(function(t){var a=t.gameState;return e.handleRestart(a)}))}},{key:"gameStart",value:function(e,t,a){var n=this,r=t.filter((function(e){var t=Object(x.a)(e,2),a=t[0];t[1];return a!==n.socketID}))[0][1];this.setState({opponentPlayer:[r,0],end:!1}),this.setBoard(e),this.setTurn(a),this.setMessage()}},{key:"handleUpdate",value:function(e){this.setBoard(e),this.setTurn(e.turn),this.setMessage()}},{key:"handleWin",value:function(e,t){if(this.setBoard(t),this.socketID===e){var a=this.state.currentPlayerScore+1;this.setState({currentPlayerScore:a,statusMessage:"You Win"})}else{var n=this.state.opponentPlayer[1]+1,r=this.state.opponentPlayer;r[1]=n,this.setState({opponentPlayer:r,statusMessage:"".concat(this.state.opponentPlayer[0]," Wins")})}this.setState({end:!0})}},{key:"handleDraw",value:function(e){this.setBoard(e),this.setState({end:!0,statusMessage:"Draw"})}},{key:"handleRestart",value:function(e){var t=e.turn;this.setBoard(e),this.setTurn(t),this.setMessage(),this.setState({end:!1})}},{key:"setMessage",value:function(){var e=this.state.turn?"Your Turn":"".concat(this.state.opponentPlayer[0],"'s Turn");this.setState({statusMessage:e})}},{key:"setTurn",value:function(e){this.state.piece===e?this.setState({turn:!0}):this.setState({turn:!1})}},{key:"setBoard",value:function(e){this.setState({game:e})}},{key:"renderBoard",value:function(e){var t=this.state.game.enabledBoards.includes(e);return r.a.createElement(P,{key:e,prevCoordinate:this.state.game.prevCoordinate,gameResult:this.state.game.gameResult,isEnabled:t,boardIndex:e,board:this.state.game.game[e],handleOnClick:this.handleClick})}},{key:"render",value:function(){if(this.state.joinError)return r.a.createElement(c.a,{to:"/"});var e=[];if(this.state.game)for(var t=0;t<9;t++){var a=this.renderBoard(t);e.push(a)}return r.a.createElement("div",null,r.a.createElement(O,{display:this.state.waiting,room:this.state.room}),r.a.createElement(N.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(j.a,{className:"paper"},this.state.statusMessage),r.a.createElement(N.a,{item:!0,xs:12,container:!0,spacing:2},e)),r.a.createElement(M,{end:this.state.end,onClick:this.playAgainRequest}))}}]),a}(n.Component),A=function(){return r.a.createElement(i.a,null,r.a.createElement(c.b,{path:"/multiplayer-super-tic-tac-toe",exact:!0,component:w}),r.a.createElement(c.b,{path:"/game",component:D}))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))},62:function(e,t,a){e.exports=a.p+"static/media/logo2.92c8c13b.png"},67:function(e,t,a){e.exports=a(119)},72:function(e,t,a){},98:function(e,t){}},[[67,1,2]]]);
//# sourceMappingURL=main.98c6fdb4.chunk.js.map